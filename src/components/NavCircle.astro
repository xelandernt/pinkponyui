---
import { COLORS, BLOG_NAV_CIRCLE_SIZE, BLOG_NAV_CIRCLE_EXPANDED_SIZE, BLOG_NAV_TRANSITION_DURATION } from '../consts';

interface Props {
	position: 'top-right' | 'top-left';
	href: string;
	text: string;
}

const { position, href, text } = Astro.props;
---

<a href={href} class={`nav-circle ${position}`}>
	<svg class="circle-svg" viewBox="0 0 200 200">
		<defs>
			{/* Single circular path for text to follow */}
			<path 
				id={`circlePath-${position}`}
				d="M 100,25 A 75,75 0 1,1 100,175 A 75,75 0 1,1 100,25"
			/>
		</defs>
		<circle cx="100" cy="100" r="100" fill={COLORS.PRIMARY_PINK} />
		<text class="nav-text">
			{/* For top-right (Blog): position text at bottom-right of circle (around 315 degrees / 87.5% of path) */}
			{/* For top-left (Home): position text at bottom-left of circle (around 225 degrees / 62.5% of path) */}
			<textPath 
				href={`#circlePath-${position}`} 
				startOffset={position === 'top-right' ? '87.5%' : '62.5%'} 
				text-anchor="middle"
			>
				{text}
			</textPath>
		</text>
	</svg>
</a>

<style define:vars={{ 
	primaryPink: COLORS.PRIMARY_PINK,
	white: COLORS.WHITE,
	circleSize: BLOG_NAV_CIRCLE_SIZE + 'px',
	expandedSize: BLOG_NAV_CIRCLE_EXPANDED_SIZE + 'px',
	transitionDuration: BLOG_NAV_TRANSITION_DURATION
}}>
	.nav-circle {
		position: fixed;
		width: var(--circleSize);
		height: var(--circleSize);
		z-index: 1000;
		cursor: pointer;
		transition: all var(--transitionDuration) ease;
		display: block;
		text-decoration: none;
	}

	.nav-circle.top-right {
		top: calc(var(--circleSize) / -2);
		right: calc(var(--circleSize) / -2 + 12px); /* Account for 12px scrollbar width */
	}

	.nav-circle.top-left {
		top: calc(var(--circleSize) / -2);
		left: calc(var(--circleSize) / -2);
	}

	.nav-circle:hover {
		width: var(--expandedSize);
		height: var(--expandedSize);
	}

	.nav-circle.top-right:hover {
		top: calc(var(--expandedSize) / -2);
		right: calc(var(--expandedSize) / -2 + 12px); /* Account for 12px scrollbar width */
	}

	.nav-circle.top-left:hover {
		top: calc(var(--expandedSize) / -2);
		left: calc(var(--expandedSize) / -2);
	}

	.circle-svg {
		width: 100%;
		height: 100%;
	}

	.nav-text {
		fill: var(--white);
		font-family: "Lobster", cursive;
		font-size: 28px;
		font-weight: bold;
		letter-spacing: 2px;
	}
</style>
